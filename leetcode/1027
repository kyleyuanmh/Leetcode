//æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£å†³æ³•æ—¶é—´å¤æ‚åº¦O(n^3)ä¸å¤ªå¥½.å®¹æ˜“è¶…æ—¶
//å¬è¯´è¿™æ˜¯ä¸€é“è°·æ­Œé¢è¯•é¢˜ï¼Œå‘µå‘µğŸ˜‘

int longestArithSeqLength(vector<int>& A) {
        int size = A.size();
        if(size<=1)
            return size;
        int ans = 0;
        unordered_map<int,int> count;//æ¬¡æ•°-å‰åå·®
        
        for(int k=0;k<size-1;k++)
        {
            int step=0;
            int i=k;
            int j=k+1;
            while(i<size-1)
            {
                step++;
                i = k;
                j = i + step;
                int diff = A[i]-A[j];
                //cout<<"step"<<step<<"  "<<i<<"  "<<j<<endl;
                int num = 0;
                while(j<size && i<size)
                { 
                    if((A[i]-A[j]) == diff)
                    {
                        num++;
                        i = j;
                        j = j+1;
                        
                    }
                    else
                    {
                        j++;
                    }
                    //cout<<i<<"  "<<j<<"  diff:"<<diff<<";num:"<<num<<endl;
                }
                
                if(count.find(diff)==count.end())
                {
                    count.insert(make_pair(diff,num));
                }
                else
                {
                    auto ite = count.find(diff);
                    if(num>(*ite).second)
                    {
                        (*ite).second = num;
                    }
                }
            }
        }
        
        for(auto ite = count.begin();ite!=count.end();ite++){
            //cout<<(*ite).first<<"  :  "<<(*ite).second<<endl;
            if((*ite).second > ans){
                ans = (*ite).second;
            }
        }
        return ans+1;
    }
    
    
//æ–¹æ³•2ï¼šåŠ¨æ€è§„åˆ’
//https://www.acwing.com/solution/LeetCode/content/1559/
/*
(åŠ¨æ€è§„åˆ’) O(n2)O(n2)
f(i,j)f(i,j) è¡¨ç¤ºä»¥ ii ç»“å°¾çš„å­åºåˆ—ï¼Œå·®ä¸º jj æ—¶çš„æœ€é•¿å­åºåˆ—é•¿åº¦ã€‚
å¯¹ä»»ä½• xxï¼Œf(i,x)=1f(i,x)=1 ä¸ºåˆå§‹çŠ¶æ€ã€‚æ¯æ¬¡å¾ªç¯æšä¸¾ j<iã€‚j<iï¼Œè®¡ç®— s=a[j]âˆ’a[i] s=a[j]âˆ’a[i]ï¼Œè½¬ç§» f(i,s)=f(j,s)+1f(i,s)=f(j,s)+1ã€‚
ç­”æ¡ˆä¸º ff æ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚
çŠ¶æ€æ•°ä¸ºä¸º O(n)O(n) ä¸ªï¼Œæ¯æ¬¡è½¬ç§»éœ€è¦ O(n)O(n) çš„æ—¶é—´ï¼Œæ•…æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n2)O(n2)ã€‚
*/
    class Solution {
public:
    int longestArithSeqLength(vector<int>& A) {
        int n = A.size(), ans = 0;
        vector<unordered_map<int, int>> f(n);
        for (int i = 1; i < n; i++)
            for (int j = 0; j < i; j++) {
                int s = A[j] - A[i];
                if (f[j].find(s) == f[j].end()) {
                    f[i][s] = 1;
                } else {
                    f[i][s] = f[j][s] + 1;  //è¯´æ˜ä»(jä¹‹å‰->j)å’Œï¼ˆj->iï¼‰çš„å·®å€¼ç›¸åŒï¼Œå› æ­¤éœ€è¦é“¾æ¥èµ·æ¥ï¼Œè¿™æ ·0-iæ‰€æœ‰ç­‰å·®ç›¸åŒçš„å°±å¯ä»¥åŠ èµ·æ¥ã€‚
                }
                ans = max(ans, f[i][s]);
            }
        return ans + 1;
    }
};
    
    
    
    
    
